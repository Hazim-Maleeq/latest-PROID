<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Memory Trail – Student Story + Rolling Ball</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene background="color: #fff8dc">
      
      <!-- Load assets -->
      <a-assets>
        <img id="studentImage" src="https://raw.githubusercontent.com/Hazim-Maleeq/latest-test/main/try.jpg">
      </a-assets>

      <!-- Cursor -->
      <a-entity cursor="rayOrigin: mouse" raycaster="objects: .interactable, .clickable"></a-entity>

      <!-- Room walls -->
      <a-box position="0 2.5 -5" width="10" height="5" depth="0.1" color="#fff3b0"></a-box>
      <a-box position="0 2.5 5" width="10" height="5" depth="0.1" color="#fff3b0"></a-box>
      <a-box position="5 2.5 0" width="0.1" height="5" depth="10" color="#ffeaa7"></a-box>
      <a-box position="-5 2.5 0" width="0.1" height="5" depth="10" color="#ffeaa7"></a-box>
      <a-box position="0 5 0" width="10" height="0.1" depth="10" color="#fff3b0"></a-box>
      <a-box position="0 0 0" width="10" height="0.1" depth="10" color="#d2b48c"></a-box>

      <!-- Picture frame (outer) -->
      <a-plane 
        id="pictureFrame"
        class="interactable"
        position="0 1.5 -3"
        width="2" 
        height="1.2"
        color="#654321"
        material="shader: flat">
      </a-plane>

      <!-- Inner image placeholder with image -->
      <a-plane 
        position="0 1.5 -2.99"
        width="1.7"
        height="0.9"
        material="shader: flat; src: #studentImage">
      </a-plane>

      <!-- Placeholder text below image -->
      <a-entity
        text="value: (image of a student); color: black; align: center; width: 2.5"
        position="0 1.1 -2.98">
      </a-entity>

      <!-- Pop-up memory text -->
      <a-entity 
        id="hoverText"
        text="value: 'In 1986, I walked these halls unsure of myself. That first science fair changed my life.' - Lila, Class of ‘89'; 
              color: black; align: center; width: 3.5; wrapCount: 40"
        position="0 2.6 -3"
        visible="false">
      </a-entity>

      <!-- Rolling ball -->
      <a-sphere 
        id="rollingBall"
        class="clickable"
        position="-2 0.5 -2" 
        radius="0.3" 
        color="#ff9900">
      </a-sphere>

      <!-- Roll Ball Button -->
      <a-plane 
        id="rollButton"
        class="clickable"
        position="0 0.5 -1.5"
        width="1.2"
        height="0.4"
        color="#4CAF50"
        material="shader: flat">
      </a-plane>

      <!-- Button label -->
      <a-entity 
        text="value: Roll Ball; color: white; align: center; width: 2"
        position="0 0.5 -1.49">
      </a-entity>

      <!-- Welcome Banner -->
      <a-plane 
        id="welcomeBanner"
        position="0 2 -1.2"
        width="3" 
        height="1.5"
        color="#ffffff"
        material="shader: flat"
        visible="true">
      </a-plane>

      <!-- Welcome Text -->
      <a-entity 
        id="bannerText"
        text="value: Welcome to the Memory Trail.\nExplore student memories that shaped our institution.\nClick 'Close' to begin.; 
              color: black; align: center; width: 2.8; wrapCount: 40"
        position="0 2 -1.19"
        visible="true">
      </a-entity>

      <!-- Close Button -->
      <a-plane 
        id="closeBannerBtn"
        class="clickable"
        position="0 1.2 -1.18"
        width="0.8"
        height="0.3"
        color="#f44336"
        material="shader: flat"
        visible="true">
      </a-plane>

      <!-- Close Button Text -->
      <a-entity 
        id="closeBtnText"
        text="value: Close; color: white; align: center; width: 1.5"
        position="0 1.2 -1.17"
        visible="true">
      </a-entity>

      <!-- Camera -->
      <a-entity 
        camera 
        position="0 1.6 1"
        look-controls
        wasd-controls>
      </a-entity>
    </a-scene>

    <!-- Script -->
    <script>
      const frame = document.querySelector('#pictureFrame');
      const text = document.querySelector('#hoverText');
      const ball = document.querySelector('#rollingBall');
      const button = document.querySelector('#rollButton');

      const closeBtn = document.querySelector('#closeBannerBtn');
      const banner = document.querySelector('#welcomeBanner');
      const bannerText = document.querySelector('#bannerText');
      const bannerButtonText = document.querySelector('#closeBtnText');

      // Hover effect
      frame.addEventListener('mouseenter', () => {
        text.setAttribute('visible', true);
      });

      frame.addEventListener('mouseleave', () => {
        text.setAttribute('visible', false);
      });

      // Ball roll
      function rollBall() {
        ball.setAttribute('animation__move', {
          property: 'position',
          to: '2 0.5 -2',
          dur: 2000,
          easing: 'easeInOutQuad'
        });

        ball.setAttribute('animation__spin', {
          property: 'rotation',
          to: '0 0 720',
          dur: 2000,
          easing: 'linear'
        });
      }

      ball.addEventListener('click', rollBall);
      button.addEventListener('click', rollBall);

      // Close banner
      closeBtn.addEventListener('click', () => {
        banner.setAttribute('visible', false);
        bannerText.setAttribute('visible', false);
        closeBtn.setAttribute('visible', false);
        bannerButtonText.setAttribute('visible', false);
      });
    </script>
  </body>
</html>

