<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Memory Trail – Living Yearbook</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene background="color: #fff8dc">

      <a-assets>
        <img id="studentImage1" src="https://raw.githubusercontent.com/Hazim-Maleeq/latest-test/refs/heads/main/Amir.png?token=GHSAT0AAAAAADGODR4AAUPJ5AGXLDGCUIXO2C73GYA">
        <img id="studentImage2" src="https://raw.githubusercontent.com/Hazim-Maleeq/latest-test/refs/heads/main/ML2.png?token=GHSAT0AAAAAADGODR4AHD5QLYBZKA4AXSOU2C73HLA">
        <video id="studentVideo" src="assets/story.mp4" crossorigin="anonymous" loop></video>
      </a-assets>

      <a-entity cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-entity>

      <a-box position="0 2.5 -5" width="10" height="5" depth="0.1" color="#fff3b0"></a-box>
      <a-box position="0 2.5 5" width="10" height="5" depth="0.1" color="#fff3b0"></a-box>
      <a-box position="5 2.5 0" width="0.1" height="5" depth="10" color="#ffeaa7"></a-box>
      <a-box position="-5 2.5 0" width="0.1" height="5" depth="10" color="#ffeaa7"></a-box>
      <a-box position="0 5 0" width="10" height="0.1" depth="10" color="#fff3b0"></a-box>
      <a-box position="0 0 0" width="10" height="0.1" depth="10" color="#d2b48c"></a-box>

      <a-plane id="thumb1" class="clickable hoverable" position="-1.5 2 -3" width="1.5" height="2" src="#studentImage1"></a-plane>
      <a-entity id="label1" text="value: Student 1 – Hover to see more; color: black; align: center; width: 2.5" position="-1.5 0.8 -2.99" visible="false"></a-entity>

      <a-plane id="thumb2" class="clickable hoverable" position="1.5 2 -3" width="1.5" height="2" src="#studentImage2"></a-plane>
      <a-entity id="label2" text="value: Student 2 – Hover to see more; color: black; align: center; width: 2.5" position="1.5 0.8 -2.99" visible="false"></a-entity>

      <a-plane id="thumb3" class="clickable hoverable" position="3 2 -1.5" rotation="0 -90 0" width="1.5" height="2" src="#studentImage1"></a-plane>
      <a-entity id="label3" text="value: Student 3 – Hover to see more; color: black; align: center; width: 2.5" position="3 0.5 -1.5" rotation="0 -90 0" visible="false"></a-entity>

      <a-plane id="thumb4" class="clickable hoverable" position="3 2 1.5" rotation="0 -90 0" width="1.5" height="2" src="#studentImage2"></a-plane>
      <a-entity id="label4" text="value: Student 4 – Hover to see more; color: black; align: center; width: 2.5" position="3 0.5 1.5" rotation="0 -90 0" visible="false"></a-entity>

      <a-video id="popupVideoReal" src="#studentVideo" width="3.2" height="1.8" crossorigin="anonymous" visible="false"></a-video>
      <a-plane id="popupVideoPlaceholder" width="3.2" height="1.8" color="#333333" visible="false"></a-plane>
      <a-entity id="popupVideoLabel" text="value: THIS IS A VIDEO AREA; color: white; align: center; width: 3" visible="false"></a-entity>

      <a-plane id="videoToggleBtn" class="clickable" width="0.8" height="0.3" color="#2196F3" visible="false"></a-plane>
      <a-entity id="videoToggleText" text="value: Pause; color: white; align: center; width: 1.5" visible="false"></a-entity>

      <a-plane id="popupTextBox" width="1.3" height="1.3" color="#ffffff" opacity="1" visible="false"></a-plane>
      <a-entity id="popupText" text="value: ; color: black; align: center; width: 1.2; wrapCount: 25" visible="false"></a-entity>

      <a-plane id="popupCloseBtn" class="clickable" width="0.3" height="0.3" color="#f44336" visible="false"></a-plane>
      <a-entity id="popupCloseText" text="value: X; color: white; align: center; width: 1.5" visible="false"></a-entity>

      <a-plane id="welcomeBanner" position="0 2 -1.2" width="3" height="1.5" color="#ffffff" visible="true"></a-plane>
      <a-entity id="bannerText" text="value: Welcome to the Living Yearbook.\nClick on student photos to see them come alive and share their memories.\nClick 'Close' to begin.; color: black; align: center; width: 2.8; wrapCount: 40" position="0 2 -1.19" visible="true"></a-entity>
      <a-plane id="closeBannerBtn" class="clickable" position="0 1.2 -1.18" width="0.8" height="0.3" color="#f44336" visible="true"></a-plane>
      <a-entity id="closeBtnText" text="value: Close; color: white; align: center; width: 1.5" position="0 1.2 -1.17" visible="true"></a-entity>

      <a-entity camera position="0 1.6 1" look-controls wasd-controls></a-entity>
    </a-scene>

    <script>
      const videoEl = document.querySelector('#studentVideo');
      const popupVideoReal = document.querySelector('#popupVideoReal');
      const popupVideoPlaceholder = document.querySelector('#popupVideoPlaceholder');
      const popupVideoLabel = document.querySelector('#popupVideoLabel');
      const popupTextBox = document.querySelector('#popupTextBox');
      const popupText = document.querySelector('#popupText');
      const popupCloseBtn = document.querySelector('#popupCloseBtn');
      const popupCloseText = document.querySelector('#popupCloseText');
      const videoToggleBtn = document.querySelector('#videoToggleBtn');
      const videoToggleText = document.querySelector('#videoToggleText');

      function showPopup(textValue, wall) {
        popupText.setAttribute('text', 'value: ' + textValue);

        if (wall === 'front') {
          popupVideoReal.setAttribute('position', '1 1.5 -2');
          popupVideoReal.setAttribute('rotation', '0 0 0');
          popupVideoReal.setAttribute('visible', true);
          videoEl.play();

          videoToggleBtn.setAttribute('position', '1 0.6 -2');
          videoToggleBtn.setAttribute('rotation', '0 0 0');
          videoToggleBtn.setAttribute('visible', true);
          videoToggleText.setAttribute('position', '1 0.6 -1.99');
          videoToggleText.setAttribute('rotation', '0 0 0');
          videoToggleText.setAttribute('visible', true);

          popupVideoPlaceholder.setAttribute('visible', false);
          popupVideoLabel.setAttribute('visible', false);

          popupTextBox.setAttribute('position', '-1.4 1.5 -2');
          popupTextBox.setAttribute('rotation', '0 0 0');
          popupTextBox.setAttribute('visible', true);
          popupText.setAttribute('position', '-1.4 1.5 -1.99');
          popupText.setAttribute('rotation', '0 0 0');
          popupText.setAttribute('visible', true);

          popupCloseBtn.setAttribute('position', '2.3 2.3 -2.01');
          popupCloseBtn.setAttribute('rotation', '0 0 0');
          popupCloseBtn.setAttribute('visible', true);
          popupCloseText.setAttribute('position', '2.3 2.3 -2');
          popupCloseText.setAttribute('rotation', '0 0 0');
          popupCloseText.setAttribute('visible', true);

        } else if (wall === 'side') {
          popupVideoPlaceholder.setAttribute('position', '2 1.5 1');
          popupVideoPlaceholder.setAttribute('rotation', '0 -90 0');
          popupVideoPlaceholder.setAttribute('visible', true);
          popupVideoLabel.setAttribute('position', '2 1.5 1.01');
          popupVideoLabel.setAttribute('rotation', '0 -90 0');
          popupVideoLabel.setAttribute('visible', true);

          popupVideoReal.setAttribute('visible', false);
          videoToggleBtn.setAttribute('visible', false);
          videoToggleText.setAttribute('visible', false);

          popupTextBox.setAttribute('position', '2 1.5 -1.4');
          popupTextBox.setAttribute('rotation', '0 -90 0');
          popupTextBox.setAttribute('visible', true);
          popupText.setAttribute('position', '2 1.5 -1.39');
          popupText.setAttribute('rotation', '0 -90 0');
          popupText.setAttribute('visible', true);

          popupCloseBtn.setAttribute('position', '2 2.3 2.3');
          popupCloseBtn.setAttribute('rotation', '0 -90 0');
          popupCloseBtn.setAttribute('visible', true);
          popupCloseText.setAttribute('position', '2 2.3 2.29');
          popupCloseText.setAttribute('rotation', '0 -90 0');
          popupCloseText.setAttribute('visible', true);
        }
      }

      function hidePopup() {
        popupTextBox.setAttribute('visible', false);
        popupText.setAttribute('visible', false);
        popupVideoReal.setAttribute('visible', false);
        popupVideoPlaceholder.setAttribute('visible', false);
        popupVideoLabel.setAttribute('visible', false);
        popupCloseBtn.setAttribute('visible', false);
        popupCloseText.setAttribute('visible', false);
        videoToggleBtn.setAttribute('visible', false);
        videoToggleText.setAttribute('visible', false);
        videoEl.pause();
      }

      videoToggleBtn.addEventListener('click', () => {
        if (videoEl.paused) {
          videoEl.play();
          videoToggleText.setAttribute('text', 'value: Pause');
        } else {
          videoEl.pause();
          videoToggleText.setAttribute('text', 'value: Play');
        }
      });

      document.querySelector('#thumb1').addEventListener('click', () => {
        showPopup('Student 1 says: I remember joining the Science Club and making lifelong friends.', 'front');
      });
      document.querySelector('#thumb2').addEventListener('click', () => {
        showPopup('Student 2 says: I loved being part of the drama productions.', 'front');
      });
      document.querySelector('#thumb3').addEventListener('click', () => {
        showPopup('Student 3 says: I spent hours in the studio perfecting my designs.', 'side');
      });
      document.querySelector('#thumb4').addEventListener('click', () => {
        showPopup('Student 4 says: Leading my club taught me teamwork.', 'side');
      });

      popupCloseBtn.addEventListener('click', hidePopup);
      popupCloseText.addEventListener('click', hidePopup);

      const closeBannerBtn = document.querySelector('#closeBannerBtn');
      const welcomeBanner = document.querySelector('#welcomeBanner');
      const bannerText = document.querySelector('#bannerText');
      const closeBtnText = document.querySelector('#closeBtnText');

      closeBannerBtn.addEventListener('click', () => {
        welcomeBanner.setAttribute('visible', false);
        bannerText.setAttribute('visible', false);
        closeBannerBtn.setAttribute('visible', false);
        closeBtnText.setAttribute('visible', false);
      });

      const hoverPairs = [
        ['#thumb1', '#label1'],
        ['#thumb2', '#label2'],
        ['#thumb3', '#label3'],
        ['#thumb4', '#label4']
      ];

      hoverPairs.forEach(pair => {
        const thumb = document.querySelector(pair[0]);
        const label = document.querySelector(pair[1]);
        thumb.addEventListener('mouseenter', () => label.setAttribute('visible', true));
        thumb.addEventListener('mouseleave', () => label.setAttribute('visible', false));
      });
    </script>
  </body>
</html>

